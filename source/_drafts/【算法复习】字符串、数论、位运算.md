---
title: 【算法复习】字符串、数论、位运算
date: 2021-02-13 19:13:03
tags:
- 算法
- 数据结构
categories: 算法
mathjax: true
---

## 字符串匹配

- next函数

  - 表示当模式P中第j个字符与目标S中的相应字符失配时，模式P中应当由前面的哪个字符（设为第k+1个）与目标中刚失配的字符重新继续进行比较
  - 如果next [j] = k，代表j 之前的字符串中有最大长度为*k* 的相同前缀后缀。此也意味着在某个字符失配时，该字符对应的next 值会告诉你下一步匹配中，模式串应该跳到哪个位置（跳到next [j] 的位置）。
  - 求next数组的过程完全可以看成字符串匹配的过程，即以模式字符串为主字符串，以模式字符串的前缀为目标字符串，一旦字符串匹配成功，那么当前的next值就是匹配成功的字符串的长度。

  

```c++
// LeetCode 28: 实现strStr()
class Solution {
public:
    int strStr(string target, string pattern) {
        if(pattern == "")
            return 0;
        // 计算模式串的next数组
        vector<int> next(pattern.length(), 0);
        next[0] = -1;
        int i = 0, j = -1;
        while(i < pattern.length() - 1)		// 注意：要-1，不然会越界
        {
            if(j == -1 || pattern[i] == pattern[j])
            {
                i++;
                j++;
                next[i] = j;
            }
            else
                j = next[j];
        }

        // KMP模式匹配
        int t_pos = 0;  // 目标串指针
        int p_pos = 0;  // 模式串指针

        while(t_pos < (int)(target.length()) && p_pos < (int)(pattern.length()))	//注意一定要类型转换！！否则p_pos会被转换成unsigned int
        {
            if(p_pos == -1 || target[t_pos] == pattern[p_pos])
            {
                t_pos ++;
                p_pos ++;
            }
            else
                p_pos = next[p_pos];
        }

        if(p_pos < pattern.length())    // 模式串未匹配完，匹配失败
            return -1;
        return t_pos - pattern.length();
    }
};
```



## 数论相关问题

### 最大公因数、最小公倍数

```c++
int gcd(int a, int b) {
	return b == 0 ? a : gcd(b, a % b);
}
int lcm(int a, int b) {
	return a * b / gcd(a, b);
}
```



### 进制转换

```c++
// LeetCode 504. 10进制转7进制数
string convertToBase7(int num) {
    if(num == 0)
        return "0";
    bool sign = false;
    if(num < 0)
    {
        sign = true;
        num = -num;
    }
    string ans;
    while(num)
    {
        int a = num / 7, b = num % 7;
        ans = to_string(b) + ans;
        num = a;
    }
    if(sign)
        ans = "-" + ans;
    return ans;
}
```

